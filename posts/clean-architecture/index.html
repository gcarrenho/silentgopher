<!DOCTYPE html>
<html lang="es" data-theme="">
<head>
  <meta charset="UTF-8">
  <title>Parte 1: Entendiendo Clean Architecture M√°s All√° del Diagrama</title>
  
  <link rel="stylesheet" href="/scss/main.min.c6663d93d404c52f5be37021224d6c75bb16a53200683e3143b1d6ccb9b93505.css" integrity="sha256-xmY9k9QExS9b43AhIk1sdbsWpTIAaD4xQ7HWzLm5NQU=">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
</head>
  <body data-post-id="clean-architecture" class="post-page">
  <header class="main-header">
    <img src="/images/posts/clean-architecture.jpg" 
       alt="Parte 1: Entendiendo Clean Architecture M√°s All√° del Diagrama" 
       class="header-gopher">
    <button class="theme-toggle" aria-label="Cambiar tema">üåô</button>
  </header>

  <nav style="text-align:center; margin-top:1rem;">
    <a href="/">Inicio</a> |
    <a href="/posts"></a> |
    <a href="/about"></a>
  </nav>

  <main class="medium-article ">
    <article>
      <h1>Parte 1: Entendiendo Clean Architecture M√°s All√° del Diagrama</h1>
      
        <h2 class="subtitle">Clean Architecture</h2>
      

      
      <div class="engagement-stats">
        <span class="stat-item">
          ‚è±Ô∏è <span class="minutes">6</span> min
        </span>
        ‚Ä¢
        <span class="stat-item">
          üëÅÔ∏è <span id="view-count">0</span>
        </span>
        ‚Ä¢
        <button id="clap-btn" class="clap-button" aria-label="Aplaudir este art√≠culo">
          üëè <span id="clap-count">0</span>
        </button>
        ‚Ä¢
        <button id="comment-btn" class="comment-button" aria-label="Comentar este art√≠culo">
          üí¨ <span id="comment-count">0</span>
        </button>
      </div>

  </div> 
        <p class="meta-info">
          June 13, 2025 ‚Äî  @SilentGopher
        </p>
      
      <div class="content">
        <blockquote>
<p>‚ö†Ô∏è <strong>Advertencia</strong>: Esto no es otro art√≠culo te√≥rico con diagramas bonitos que solo funcionan en PowerPoint.
Hablar√© de fracasos, de c√≥mo <strong>mis primeros intentos con Clean Architecture fueron un desastre</strong>, y de la soluci√≥n que finalmente funcion√≥ en proyectos reales (con deadlines, jefes impacientes y requirements que cambian cada martes).</p></blockquote>
<h2 id="-por-qu√©-escribo-esto">üöÄ ¬øPor qu√© escribo esto?</h2>
<p>Hace ya unos a√±os, en mi primer proyecto &ldquo;serio&rdquo; con Go, comet√≠ todos los errores posibles:</p>
<ol>
<li>
<p><strong>Ceguera arquitect√≥nica</strong>: Cre√≠ que poner todo en /internal autom√°ticamente hac√≠a mi c√≥digo &ldquo;limpio&rdquo;. Spoiler: No.</p>
</li>
<li>
<p><strong>Overengineering</strong>: Implement√© una estructura Hexagonal tan &ldquo;pura&rdquo; que hasta el HelloWorld necesitaba 7 archivos.</p>
</li>
<li>
<p><strong>Acoplamiento disfrazado</strong>: Mis interfaces eran tan grandes que parec√≠an clases de Java.</p>
</li>
</ol>
<p><strong>Este art√≠culo es el que me hubiera gustado leer antes de quemar 3 meses en refactors infinitos.</strong></p>
<h2 id="-clean-architecture-la-teor√≠a-vs-mi-realidad">üî™ Clean Architecture: La teor√≠a vs. Mi realidad</h2>
<p>La teor√≠a dice:</p>
<blockquote>
<p>&ldquo;Separa el dominio, usa interfaces, blah blah&rdquo;.</p></blockquote>
<p>Mi realidad fue:</p>
<blockquote>
<p>&ldquo;¬øPor qu√© mi UserService sabe c√≥mo se persiste un PDF en S3? ¬øQui√©n escribi√≥ este c√≥digo?‚Ä¶ Ah, fui yo. üíÄ&rdquo;</p></blockquote>
<h3 id="los-3-enfoques-que-prob√©"><strong>Los 3 enfoques que prob√©</strong></h3>
<h3 id="1-package-by-layer-el-cl√°sico">1. <strong>Package by Layer: El cl√°sico &ldquo;cementerio de capas&rdquo;</strong></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">handlers</span><span style="color:#f92672">/</span>   <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Aqu√≠</span> <span style="color:#a6e22e">vive</span> <span style="color:#a6e22e">el</span> <span style="color:#a6e22e">caos</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">services</span><span style="color:#f92672">/</span>   <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Aqu√≠</span> <span style="color:#a6e22e">el</span> <span style="color:#e6db74">&#34;domain&#34;</span> <span style="color:#a6e22e">se</span> <span style="color:#a6e22e">mezcla</span> <span style="color:#a6e22e">con</span> <span style="color:#a6e22e">l√≥gica</span> <span style="color:#a6e22e">de</span> <span style="color:#a6e22e">HTTP</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">repositories</span><span style="color:#f92672">/</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#960050;background-color:#1e0010">¬ø</span><span style="color:#a6e22e">Por</span> <span style="color:#a6e22e">qu√©</span> <span style="color:#a6e22e">este</span> <span style="color:#a6e22e">m√©todo</span> <span style="color:#a6e22e">tiene</span> <span style="color:#ae81ff">20</span> <span style="color:#a6e22e">par√°metros</span><span style="color:#960050;background-color:#1e0010">?</span>
</span></span></code></pre></div><p><strong>Lo bueno</strong>:</p>
<ul>
<li>
<p>Todos lo entienden (al principio).</p>
</li>
<li>
<p>Ideal si tu equipo viene de Java/Spring.</p>
</li>
</ul>
<p><strong>Lo malo</strong>:</p>
<ul>
<li>
<p>En 6 meses, tu UserService termina con 3000 l√≠neas y dependencias ocultas.</p>
</li>
<li>
<p>Experiencia real: Una vez pas√© 2 d√≠as debuggeando un nil pointer porque un handler llamaba directamente a un repository salt√°ndose 3 capas.</p>
</li>
</ul>
<h3 id="2-package-by-feature-el">2. <strong>Package by Feature: El &ldquo;s√°lvese quien pueda&rdquo;</strong></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">users</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">payments</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">reports</span><span style="color:#f92672">/</span>  <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Aqu√≠</span> <span style="color:#a6e22e">hay</span> <span style="color:#a6e22e">un</span> <span style="color:#a6e22e">God</span> <span style="color:#a6e22e">Object</span> <span style="color:#a6e22e">que</span> <span style="color:#a6e22e">hace</span> <span style="color:#a6e22e">TODO</span>
</span></span></code></pre></div><p><strong>Lo bueno:</strong></p>
<ul>
<li>
<p>Parece ordenado al principio.</p>
</li>
<li>
<p>Los equipos pueden trabajar en &ldquo;features&rdquo; separadas.</p>
</li>
</ul>
<p><strong>Lo malo:</strong></p>
<ul>
<li>
<p><strong>El infierno de la duplicaci√≥n</strong>: En un proyecto, ten√≠amos 5 implementaciones distintas de SendEmail() porque cada feature ten√≠a su propia l√≥gica.</p>
</li>
<li>
<p><strong>Dependencias vampiro</strong>: El m√≥dulo payments importaba internamente users.Model, y cuando cambiamos la DB, todo explot√≥.</p>
</li>
</ul>
<p>(Pro tip: Si ves import &ldquo;../users&rdquo; en tu c√≥digo, prende una vela. Ya es tarde.)</p>
<h2 id="3-hexagonal-architecture-cuando-la-teor√≠a-choca-con-la-pr√°ctica">3. <strong>Hexagonal Architecture: Cuando la teor√≠a choca con la pr√°ctica</strong></h2>
<p>La teor√≠a promet√≠a:</p>
<blockquote>
<p>&ldquo;Dominio puro, adaptadores intercambiables, felicidad eterna&rdquo;.</p></blockquote>
<p>Mi implementaci√≥n fue:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">internal</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">/</span><span style="color:#a6e22e">core</span><span style="color:#f92672">/</span>       <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Aqu√≠</span> <span style="color:#a6e22e">iba</span> <span style="color:#a6e22e">el</span> <span style="color:#e6db74">&#34;dominio&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/</span><span style="color:#a6e22e">domain</span><span style="color:#f92672">/</span>   <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Termin√≥</span> <span style="color:#a6e22e">con</span> <span style="color:#ae81ff">50</span> <span style="color:#e6db74">&#34;entities&#34;</span> <span style="color:#a6e22e">acopladas</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/</span><span style="color:#a6e22e">ports</span><span style="color:#f92672">/</span>    <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Interfaces</span> <span style="color:#a6e22e">de</span> <span style="color:#ae81ff">100</span> <span style="color:#a6e22e">m√©todos</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/</span><span style="color:#a6e22e">services</span><span style="color:#f92672">/</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">L√≥gica</span> <span style="color:#a6e22e">mezclada</span> <span style="color:#a6e22e">con</span> <span style="color:#a6e22e">infra</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">/</span><span style="color:#a6e22e">adapters</span><span style="color:#f92672">/</span>   <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Aqu√≠</span> <span style="color:#a6e22e">el</span> <span style="color:#a6e22e">ORM</span> <span style="color:#a6e22e">se</span> <span style="color:#a6e22e">col√≥</span> <span style="color:#a6e22e">al</span> <span style="color:#a6e22e">dominio</span>
</span></span></code></pre></div><p><strong>¬øQu√© sali√≥ mal?</strong></p>
<ul>
<li>
<p><strong>El equipo no lo entendi√≥</strong>: Los nuevos devs llamaban al repository desde el handler porque &ldquo;era m√°s r√°pido&rdquo;.</p>
</li>
<li>
<p><strong>Los tests eran imposibles</strong>: Mockear 10 interfaces para un caso de uso simple.</p>
</li>
<li>
<p><strong>Resultado</strong>: Una &ldquo;Clean Architecture&rdquo; que en realidad era un monolito con capas de abstracci√≥n innecesarias.</p>
</li>
</ul>
<h2 id="-el-d√≠a-que-rompimos-la-arquitectura-sin-querer">üí• El d√≠a que rompimos la arquitectura (sin querer)</h2>
<p>O: &ldquo;Por qu√© Juan del equipo me odia despu√©s de ese PR&rdquo;
Contexto: Hace unos meses, en un sprint normal, un compa√±ero nuevo (llam√©mosle Juan) recibi√≥ esta tarea:</p>
<blockquote>
<p>&ldquo;Necesitamos un endpoint <code>/orders/user/{id}</code> que devuelva las √≥rdenes. ¬°Es urgente para el cliente!&rdquo;</p></blockquote>
<p>Juan, siendo eficiente, vio que ya exist√≠a un <code>OrderRepository</code> con el m√©todo perfecto:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">FindByUserID</span>(<span style="color:#a6e22e">userID</span> <span style="color:#66d9ef">string</span>) ([]<span style="color:#a6e22e">Order</span>, <span style="color:#66d9ef">error</span>)
</span></span></code></pre></div><p>Y escribi√≥ esto en el handler:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">h</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OrderHandler</span>) <span style="color:#a6e22e">GetOrdersByUser</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">userID</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">chi</span>.<span style="color:#a6e22e">URLParam</span>(<span style="color:#a6e22e">r</span>, <span style="color:#e6db74">&#34;id&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">orders</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">orderRepo</span>.<span style="color:#a6e22e">FindByUserID</span>(<span style="color:#a6e22e">userID</span>) <span style="color:#75715e">// &lt;- ¬°Acceso directo!</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ... (manejo de errores y respuesta)</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Parec√≠a inocente&hellip; hasta que empezaron los problemas</strong>:</p>
<p>ü§Ø ¬øQu√© sali√≥ mal?</p>
<ol>
<li>
<p><strong>Reglas de negocio olvidadas</strong>:
Las √≥rdenes deb√≠an filtrarse por status != &ldquo;canceled&rdquo;, pero como fue directo al repo, el cliente vio datos inconsistentes.</p>
</li>
<li>
<p><strong>El gran acoplamiento oculto</strong>:
El handler ahora depend√≠a de:</p>
<ul>
<li>La firma del repositorio.</li>
<li>La estructura Order de la DB (que inclu√≠a campos internos como internal_notes).</li>
</ul>
</li>
<li>
<p><strong>El test fue una pesadilla</strong>:
Tuvo que mockear la DB&hellip; para probar un handler.</p>
</li>
</ol>
<h2 id="-diagn√≥stico-violamos-la-hexagonal-architecture">üîç Diagn√≥stico: Violamos la Hexagonal Architecture</h2>
<p>(Sin darnos cuenta)</p>
<p>El diagrama te√≥rico dec√≠a:</p>
<blockquote>
<p>&ldquo;Los handlers (adapters) deben hablar con el dominio (services), NO con la infraestructura (repositories).&rdquo;</p></blockquote>
<p>Pero en la pr√°ctica:</p>
<ul>
<li>
<p><strong>El repo se col√≥ en el handler</strong> como un atajo.</p>
</li>
<li>
<p><strong>El dominio qued√≥ fuera de la conversaci√≥n</strong> (nadie us√≥ el OrderService).</p>
</li>
</ul>
<h2 id="-la-soluci√≥n-contratos-no-acoplamentos">üí° La soluci√≥n: Contratos, no acoplamentos</h2>
<p>üö´ Error com√∫n (que todos cometemos):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// payments/module.go</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Payment</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">User</span> <span style="color:#a6e22e">users</span>.<span style="color:#a6e22e">UserEntity</span> <span style="color:#75715e">// &lt;- ¬°Acoplamiento directo a la entidad de users!</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Problema</strong>: Si UserEntity cambia, payments se rompe.</p>
<p>‚úÖ Fix real (que implementamos):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// contracts/user.go</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">UserDTO</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ID</span>    <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Email</span> <span style="color:#66d9ef">string</span> <span style="color:#75715e">// Solo lo que necesitamos</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// payments/module.go</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Payment</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">User</span> <span style="color:#a6e22e">contracts</span>.<span style="color:#a6e22e">UserDTO</span> <span style="color:#75715e">// &lt;- ¬°Acoplamiento a CONTRATO!</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Regla simple</strong>:</p>
<blockquote>
<p>&ldquo;Si un m√≥dulo A usa algo de B, B debe exponerlo expl√≠citamente en su contrato.
Como una API p√∫blica: si no est√° documentado, no existe.&rdquo;</p></blockquote>
<h2 id="-la-soluci√≥n-que-me-funcion√≥-componentes--contratos">üí° La soluci√≥n que me funcion√≥: Componentes + Contratos</h2>
<p>Despu√©s de quemarme, aprend√≠ que:</p>
<p>‚úÖ Cada componente debe ser un &ldquo;mini-proyecto&rdquo; (con su dominio, l√≥gica y adaptadores).<br>
‚úÖ Los contratos son sagrados (si cambias uno, rompes todo‚Ä¶ como un API p√∫blica).<br>
‚úÖ Go es simple, tu arquitectura tambi√©n deber√≠a serlo.</p>
<p>Estructura final que usamos (y sigue viva):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">cmd</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span><span style="color:#a6e22e">internal</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">/</span><span style="color:#a6e22e">users</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/</span><span style="color:#a6e22e">adapters</span><span style="color:#f92672">/</span>     <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Implementacion</span> <span style="color:#a6e22e">de</span> <span style="color:#a6e22e">contratos</span>.
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/</span><span style="color:#a6e22e">models</span><span style="color:#f92672">/</span>      <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Solo</span> <span style="color:#a6e22e">structs</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">users_component</span>.<span style="color:#66d9ef">go</span>     <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Interface</span> <span style="color:#a6e22e">l√≥gica</span> <span style="color:#a6e22e">de</span> <span style="color:#a6e22e">negocio</span> <span style="color:#a6e22e">PURA</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">users_component_impl</span>.<span style="color:#66d9ef">go</span>  <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Implementacion</span> <span style="color:#a6e22e">l√≥gica</span> <span style="color:#a6e22e">de</span> <span style="color:#a6e22e">negocio</span> <span style="color:#a6e22e">PURA</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">users_repository</span>.<span style="color:#66d9ef">go</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Interface</span> <span style="color:#a6e22e">privada</span> <span style="color:#a6e22e">persistencia</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">users_repository_impl</span>.<span style="color:#66d9ef">go</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Implementacion</span> <span style="color:#a6e22e">privada</span> <span style="color:#a6e22e">persistencia</span> <span style="color:#a6e22e">en</span> <span style="color:#a6e22e">db</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">/</span><span style="color:#a6e22e">contracts</span><span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/</span><span style="color:#a6e22e">users</span><span style="color:#f92672">/</span>         <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Lo</span> <span style="color:#a6e22e">que</span> <span style="color:#a6e22e">OTROS</span> <span style="color:#a6e22e">componentes</span> <span style="color:#a6e22e">pueden</span> <span style="color:#a6e22e">usar</span> (<span style="color:#a6e22e">necesitan</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">service</span>.<span style="color:#66d9ef">go</span>    <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Interfaz</span> <span style="color:#a6e22e">con</span> <span style="color:#ae81ff">3</span> <span style="color:#a6e22e">m√©todos</span>, <span style="color:#a6e22e">no</span> <span style="color:#ae81ff">20.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">/</span><span style="color:#a6e22e">web</span><span style="color:#f92672">/</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">punto</span> <span style="color:#a6e22e">de</span> <span style="color:#a6e22e">entrada</span> <span style="color:#a6e22e">controllers</span><span style="color:#f92672">/</span><span style="color:#a6e22e">handlers</span> <span style="color:#a6e22e">que</span> <span style="color:#a6e22e">solamente</span> <span style="color:#a6e22e">se</span> <span style="color:#a6e22e">comunican</span> <span style="color:#a6e22e">con</span> <span style="color:#a6e22e">el</span> <span style="color:#a6e22e">servicio</span> <span style="color:#a6e22e">de</span> <span style="color:#a6e22e">cada</span> <span style="color:#a6e22e">component</span>.
</span></span></code></pre></div><p>Regla de oro:</p>
<blockquote>
<p>&ldquo;Si un componente necesita algo de otro, no le preguntes c√≥mo lo hace. P√≠delo en el contrato y sigue con tu vida.&rdquo;</p></blockquote>
<p>(Ejemplo real: Cuando tuvimos que migrar de MySQL a PostgreSQL, solamente implementamos la interface y swicheamos. El dominio ni se enter√≥.)</p>
<h2 id="-conclusi√≥n-clean-architecture-no-es-religi√≥n">üé§ Conclusi√≥n: Clean Architecture no es religi√≥n</h2>
<ul>
<li>
<p><strong>No la uses si</strong>: Tu proyecto es un MVP o tienes un equipo junior.</p>
</li>
<li>
<p><strong>√ösala bien si</strong>: Necesitas escalar, mantener y dormir por las noches.</p>
</li>
<li>
<p><strong>Mi error m√°s grande</strong>: Pensar que &ldquo;seguir el diagrama al pie&rdquo; era suficiente. La clave est√° en definir contratos claros y hacer cumplir los l√≠mites.</p>
</li>
</ul>
<blockquote>
<p>&ldquo;La arquitectura limpia no se trata de carpetas perfectas, sino de poder cambiar de idea sin miedo a que todo explote.&rdquo;</p></blockquote>
<p>üöÄ En la Parte 2: Te mostrar√© el c√≥digo REAL (con los errores incluidos) de c√≥mo implementamos esto en un proyecto con 100k l√≠neas de Go.</p>
<p>(Y s√≠, habr√° ejemplos de c√≥mo nuestro &ldquo;maravilloso&rdquo; contrato de PaymentService tuvo que cambiar 3 veces‚Ä¶ y c√≥mo lo manejamos sin morir en el intento).</p>
<p>üì¢ ¬øT√∫ tambi√©n has luchado con Clean Architecture?
D√©jame saber en los comentarios.</p>
<h2 id="-referencias">üìö Referencias</h2>
<ul>
<li><a href="https://a.co/d/a3ALlXM">Clean Architecture - Robert C. Martin</a></li>
</ul>
      </div>
      
      
     
        
         
      </div>

  

<section class="all-comments">
  <div class="comments-header">
    <h3>Conversaci√≥n</h3>
    <div class="comment-count">
      üí¨ <span id="comment-count-section">0</span> comentarios
    </div>
  </div>

  
  <div id="login-container" class="login-container" style="display: none;">
    <p>Debes iniciar sesi√≥n con GitHub para comentar</p>
    <button id="login-github-btn" class="login-github-btn">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.166 6.839 9.489.5.09.682-.218.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.202 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.163 22 16.418 22 12c0-5.523-4.477-10-10-10z"></path>
      </svg>
      Iniciar sesi√≥n con GitHub
    </button>
  </div>

  
  <form id="main-comment-form" class="comment-form" style="display: none;">
    <div class="avatar-placeholder">
      <img id="main-user-avatar-img" src="https://www.gravatar.com/avatar/?d=mp&s=40" class="avatar-img">
    </div>
    <div class="form-content">
      <textarea placeholder="Escribe tu comentario..." rows="3" required></textarea>
      <div class="form-actions">
        <button type="submit" class="submit-button">Publicar</button>
      </div>
    </div>
    <input type="hidden" id="reply-to" value="">
  </form>
</section>

    </article>
  </main>

  <script>
document.addEventListener('DOMContentLoaded', () => {
    
    const themeToggles = document.querySelectorAll('.theme-toggle');
    
    
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const currentTheme = localStorage.getItem('theme');

    
    if (currentTheme === 'dark' || (!currentTheme && prefersDark)) {
        document.documentElement.setAttribute('data-theme', 'dark');
        themeToggles.forEach(btn => btn.textContent = '‚òÄÔ∏è');
    } else {
        document.documentElement.setAttribute('data-theme', 'light');
        themeToggles.forEach(btn => btn.textContent = 'üåô');
    }

    
    themeToggles.forEach(button => {
        button.addEventListener('click', () => {
            const current = document.documentElement.getAttribute('data-theme');
            if (current === 'light') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggles.forEach(btn => btn.textContent = '‚òÄÔ∏è');
                localStorage.setItem('theme', 'dark');
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                themeToggles.forEach(btn => btn.textContent = 'üåô');
                localStorage.setItem('theme', 'light');
            }
        });
    });

    
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        if (!localStorage.getItem('theme')) {
            const newTheme = e.matches ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            themeToggles.forEach(btn => btn.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô');
        }
    });
});
</script>


<script>
  const postId = "posts\/clean-architecture.md"; 
  const countKey = `claps-${postId}`;
  const countDisplay = document.getElementById("clap-count");
  const button = document.getElementById("clap-button");

  const saved = localStorage.getItem(countKey);
  let count = saved ? parseInt(saved) : 0;
  if (countDisplay) countDisplay.textContent = count;

  if (button) {
    button.addEventListener("click", () => {
      count += 1;
      countDisplay.textContent = count;
      localStorage.setItem(countKey, count);
    });
  }
</script>


  <script>
    window.PUBLIC_SUPABASE_URL = 'https:\/\/hnshpzakudamqqauqqqe.supabase.co';
    window.PUBLIC_SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhuc2hwemFrdWRhbXFxYXVxcXFlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3NTEwOTgsImV4cCI6MjA2ODMyNzA5OH0.3P9rwWs8hbXBCpvX0ddfMH6p0GzVVrjfOCx-xTaMgd8';

</script>

  <script type="module" src="/js/main.js"></script>
</body>
</html>